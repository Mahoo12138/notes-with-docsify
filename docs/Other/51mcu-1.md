# 单片机的习题

## 硬件结构习题

1. 单片机设置PSW中RS1 RS0 = 0 1时，R1的地址为(  ) ，单片机复位后 R1 的地址为 (  )：

   **09H  01H**：RS1 RS0 = 0 1对应 PSW 中第 1 区，则 R1 为 09H，复位后 PSW 为00H对应第 0 区，则 R1 为01H，详细查看相关知识点：

   +  [数据存储空间](#数据存储空间)
   +  [程序状态字寄存器PSW](#程序状态字寄存器PSW)

2. AT89S51 的堆栈设置在(  ) ，堆栈寄存器 SP 是(  ) 位寄存器，单片机复位后SP的初始值是(  )：

   **片内数据存储区**（片内RAM 的 **30H～7FH**），8 位，07H：基础知识点：

   + [特殊功能寄存器（SFR）](#特殊功能寄存器（SFR）)：查看堆栈寄存器 SP

3. 区分外部程序存储器和数据存储器的最可靠的方法是看其是被 WR\* 还是被 PSEN\* 信号连接。**（√）**

4. AT89S51外扩的程序存储器和数据存储器可以有相同的地址空间，但不会发生数据冲突，为什么？

   > 答:不发生数据冲突的原因是：AT89S51中访问程序存储器和数据存储器的**指令不一样**。**选通信号也就不一样**，前者为 PSEN，后者为 WR与RD。
   >
   > 程序存储器访问指令为: `MOVC  A，@DPTR; MOVC A, @A+pc。`
   >
   > 数据存储器访问指令为: `MOVX A, @DPTR; MOVX A, @Ri; MOVX @DPTR, A`。

5. 访问片外数据存储器的寻址方式是**寄存器间接寻址**；

6. 若某数据存储器芯片地址线为12根,那么它的存储容量为 **4KB**；

7. 

 

## 指令系统习题


1. 指令判断正误：

   + `MOV 55H，@R5`：可作为间接寻址寄存器的只有寄存器 R0、R1；

   + `DEC DPTR`：	在 51 单片机中只有 INC DPTR，**没有 DEC DPTR**，要实现减一可：

     ```assembly
     DPTRDEC:
         CLR C
         MOV A, DPL
         SUBB A, #1
         MOV DPL, A
         MOV A, DPH
         SUBB A, #0	;若 SUBB A, #1 产生了借位，C 标志位会置 1，这里SUBB指令减 0 相当于减 1
         MOV DPH, A
         RET
     ```
   + ``

2. 对访问内部 RAM 和外部 RAM，各应采用哪些寻址方式？

   > 答：对内部 RAM 的寻址方式有直接寻址、寄存器间接寻址和可对位寻址的位寻址。对外部RAM的寻址方式只能用寄存器 R0/R1（8位地址）或 DPTR（16位地址）间接寻址。

3. 如果(DPTR) = 507BH，(SP) = 32H，(30H) = 50H，(31H) = 5FH，(32H) = 3CH，则执行下列指令后：

    ```assembly
    POP DPH
    POP DPL
    POP SP
    ```

    则：(DPH)  =  3CH；(DPL)  =  5FH；(SP)  =  **4FH**；

    > 前两空倒易理解，当执行到`POP SP` 时，CPU 将当前栈顶的内容送入 SP，再执行 SP - 1 的操作：前两步代码执行后栈顶地址为 30H，`POP SP` 将 30H 对应的数据 50H  送入 SP （SP = 50H），再减一，SP = 4FH。

4. SJMP（短转移）指令和 AJMP（绝对转移）指令的主要区别。

   > 前者提供了以 SJMP 的下一条指令的起始地址为中心的 **256 字节**范围的转移（-128～+127），后者的转移目标地址必须在与 AJMP 的下一条指令的第一字节相同的 **2KB 区**的程序储存器中。
   >
   > 短转移方便了可重定位编码，SJMP方便了PC可重定位编码，但转移范围小。而AJMP转移范围大，但存在**跳区的限制**，AJMP 指令只能位于 2KB 区的最后2个字节处时，才可跳到下一个区去。因此用 AJMP 指令来代替 SJMP 指令是有条件的，也就是目标地址必须与它下面的指令存放地址在同一个2KB区域内。

    

## 中断系统习题

1. 若（IP）=00010100B，则优先级最高者为（   ），最低者为（   ）：

   - 定时器T0，串行口 | 外部中断0，定时器T0 | 串行口，定时器T0
   - 外部中断1，定时器T1

   > 答案为：**外部中断1，定时器T1**，设置 IP 寄存器后，优先级为外部中断1 > 串行口中断 > 外部中断0 > T0 溢出中断  > T1溢出中断，根据 IP 分级后，按自然优先级排列。

2. 在AT89S51单片机中，需要软件实现中断撤销的是（   ）：

   - 定时中断 | 电平触发的外部中断 | 脉冲触发的外部中断
   - **串行口中断**

3. 在 AT89S51 的中断请求源中，需要外加电路实现中断撤销的是（   ）：

   - 跳沿方式的外部中断请求 | 定时中断 | 外部串行中断
   - **电平方式的外部中断请求**

4. 各中断源发出的中断请求信号，都会标记在AT89S51的 TCON 寄存器中。**（×）**

5. 中断服务子程序返回指令 RETI 和普通子程序返回指令 RET有什么区别？

   > 答：RETI 除了将压栈的内容出栈外（即现场恢复），还清除在中断响应时被置 1 的 AT89S51 内部中断优先级寄存器的优先级状态。

6. 

## 定时器/计数器习题

1. 定时器 T0 工作在方式 3 时，定时器 T1 有(   )工作方式：

   - **3种**：**方式 3 只适用于 T0**，T1 不能工作在方式 3 

2. 减少AT89S51单片机定时器用指令反复装入计数初值所带来的定时误差问题，应采用方式（   ）。

   - **2**：**方式 2 在计数溢出时，自动将 THx 中的初值送至 TLx，可较精确确定时间，减少误差**

3. 定时器/计数器T0在 GATE=0 时运行的条件有（   ）。

   - P3.2 = 1 | T0开中断 | 设置好定时初值
   - **TR0 = 1**：GATE = 0 ，仅由运行控制位TRx（x = 0，1）来控制定时器/计数器运行。 

4. AT89S51单片机的晶振为 6MHz，若利用定时器 T1 的方式 1 定时 1ms，则计数初值分别为（TH1）=(   )，（TL1）=(   )：

   - FCH，14H | ECH，16H | ECH，16H
   - **FEH，0CH**

   > 答案为：**FEH，0CH**，晶振为 6MHz 时钟周期 = 1 / 6 MHz = 1 / 6 us，方式 1 为 16 位计数器：
   >
   > ​     1 个机器周期 = 12 个时钟周期 = 1 / 6 us × 12 = 2 × 10^−6^  s
   >
   > ​	设装入 T0 的初值为 X，则有 (216 −X) × 2 × 10^−6^ = 1 × 10^−3^ s。 
   >
   > ​														216 − X = 500， X = 65036。 
   >
   > ​	将 X 转化为 16 进制数，即： 65036 = FE0CH 。 T0 的初值为 TH0 = FEH，TL0 = 0CH。

## 串行口习题

1. AT89S51的串行口扩展并行 I/O 口时，串行接口工作方式选择（    ）：

   - 方式0：方式 0 为**同步移位寄存器方式**，用于扩展并行 I/O 口，不用于异步通信。 
2. AT89S51单片机串行口的方式1、2、3中，（    ）的波特率，与定时器/计数器T1的溢出率有关：

   + 方式1和方式3：[串口各种工作方式下波特率的计算](#串口各种工作方式下波特率的计算)
3. 串行口方式2接收到的第9位数据送（SCON）寄存器的（RB8）位中保存。

